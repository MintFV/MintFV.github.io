# name: Visual Regression & Accessibility Tests

# on:
#   push:
#     branches: [ main, develop ]
#   pull_request:
#     branches: [ main, develop ]

# jobs:
#   visual-tests:
#     runs-on: ubuntu-latest
#     timeout-minutes: 30

#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v4

#       - name: Setup Ruby
#         uses: ruby/setup-ruby@v1
#         with:
#           ruby-version: '3.4'
#           bundler-cache: true

#       - name: Setup Node.js
#         uses: actions/setup-node@v4
#         with:
#           node-version: '18'

#       - name: Install test dependencies
#         working-directory: ./tests
#         run: npm ci

#       - name: Install Playwright browsers
#         working-directory: ./tests
#         run: npx playwright install --with-deps

#       - name: Build Jekyll site
#         run: bundle exec jekyll build

#       - name: Run visual regression tests
#         run: |
#           bundle exec jekyll serve --port 4001 --detach
#           sleep 5
#           cd tests
#           PLAYWRIGHT_BASE_URL=http://localhost:4001 npm run test:visual

#       - name: Run accessibility tests
#         run: |
#           cd tests
#           PLAYWRIGHT_BASE_URL=http://localhost:4001 npm run test:a11y

#       - name: Upload Playwright report
#         if: always()
#         uses: actions/upload-artifact@v4
#         with:
#           name: playwright-report
#           path: tests/playwright-report/
#           retention-days: 30

#       - name: Upload Playwright snapshots
#         if: always()
#         uses: actions/upload-artifact@v4
#         with:
#           name: playwright-snapshots
#           path: tests/visual.spec.ts-snapshots/
#           retention-days: 30

#       - name: Stop Jekyll server
#         if: always()
#         run: pkill -f "jekyll serve" || true
